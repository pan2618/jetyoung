<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Order | Jet Young</title>


<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="styles.css"><!-- ä½ çš„ä¸»é¡Œè®Šæ•¸ -->
<style>
  /* â•â•â•â•â• NAVBAR â•â•â•â•â• */
  nav.navbar{background:#fff;border-bottom:1px solid var(--border);}
  
  /* â•â•â•â•â• ç”¢å“å¡ç‰‡ â•â•â•â•â• */
  .products-row .col-4{flex:0 0 33.333%;max-width:33.333%}
  .product-card{display:flex;flex-direction:column;align-items:center;min-height:340px;padding:18px}
  .product-img{width:100%;height:120px;object-fit:contain}
  .qty-group{display:flex;align-items:center;gap:6px}
  .btn-qty{width:30px;height:30px;border:1px solid var(--blue-600);border-radius:4px;background:#fff;color:var(--blue-600);font-weight:700}
  .btn-qty:hover{background:var(--blue-100)}
  .qty-input{width:44px;text-align:center;border:none;background:transparent;font-weight:600}
  .card.product-card{transition:box-shadow .25s}
  .card.product-card:hover{box-shadow:0 4px 16px rgba(0,0,0,.08)}
  
  /* æ¨™é¡Œåº•ç·š */
  .section-title{font-weight:700;color:var(--blue-600);position:relative;display:inline-block}
  .section-title::after{content:"";position:absolute;left:0;bottom:-4px;width:100%;height:3px;background:var(--blue-300,#8dc7ff);border-radius:2px}
  .section-sub{color:var(--blue-400,#4da4ff);font-size:.95rem}
  
  /* â•â•â•â•â• Sticky / Bottom-sheet Summary â•â•â•â•â• */
  @media(min-width:992px){.order-summary-sticky{position:sticky;top:100px}}
  
  @media(max-width:991.98px){
    .mobile-sheet{position:fixed;left:0;right:0;bottom:0;z-index:2000;background:#fff;box-shadow:0 -4px 12px rgba(0,0,0,.15);border-radius:16px 16px 0 0;transform:translateY(calc(100% - 54px));transition:.35s;max-height:65vh;display:flex;flex-direction:column;}
    .mobile-sheet.open{transform:translateY(0)}
    .mobile-sheet .handle{width:42px;height:4px;background:#ccc;border-radius:2px;margin:6px auto 10px}
    .sheet-body{flex:1 1 auto;overflow-y:auto;padding:0 1rem 1.25rem}
    .contact-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
    .contact-grid .full{grid-column:1/3}
  }
  
  /* Loading overlay */
  #loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;z-index:3000}
  .loading h2{color:#fff;font-size:.9rem;letter-spacing:.1em;margin-bottom:1rem}
  .loading span{display:inline-block;width:.7em;height:.7em;margin:.22em;background:var(--blue-600);border-radius:50%;animation:pulse 1s ease-in-out infinite}
  @keyframes pulse{0%{opacity:.3}50%{opacity:1}100%{opacity:.3}}
  
  /* â€”â€”â€”â€”â€”â€”â€”â€” æ–°å¢ï¼šbottom-sheet åˆå§‹éœ²å‡º 80px & æœ€å¤š 70vh â€”â€”â€”â€”â€”â€”â€”â€” */
  @media (max-width: 991.98px) {
    .mobile-sheet {
      transform: translateY(calc(100% - 80px)); /* åˆå§‹éœ²å‡º 80px */
      max-height: 70vh;                        /* æœ€å¤š 70vh */
    }
  }
  
  /* â€”â€”â€”â€”â€”â€”â€”â€” æ–°å¢ï¼šæ‰‹æ©Ÿç«¯ 3 æ¬„æ’ç‰ˆ â€”â€”â€”â€”â€”â€”â€”â€” */
  @media (max-width: 767.98px) {
    .products-row .col-4 {
      flex: 0 0 33.333%;  /* ä¸‰æ¬„ */
      max-width: 33.333%;
    }
  }
  </style>
  
</head>

<div class="modal fade" id="confirmModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0">
        <h5 class="modal-title">è¨‚å–®å·²é€å‡º âœ…</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <!-- JS æœƒæŠŠå…§å®¹å¡åˆ° #confirmBody -->
        <p id="confirmBody" class="mb-0"></p>
      </div>
      <div class="modal-footer border-0 pt-0">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          é—œé–‰
        </button>
      </div>
    </div>
  </div>
</div>


<body>
<!-- Loading -->
<div id="loading-overlay">
  <div class="loading"><h2>LOADINGâ€¦</h2><span></span><span></span><span></span><span></span><span></span></div>
</div>

<!-- Promo-bar -->
<div class="promo-bar">
  <div class="promo-messages">
    <div class="promo-message">ğŸ‰ æœ¬é€±é™æ™‚ï¼šå…¨é¤¨çµå¸³è¼¸å…¥ã€SALE20ã€‘äº« 20% æŠ˜æ‰£ï¼</div>
    <div class="promo-message">ğŸ“¢ æ–°å“ä¸Šæ¶ï¼šæœ‰æ©Ÿæ²™æ‹‰é†¬å³æ—¥èµ·é–‹æ”¾é è³¼ï¼</div>
    <div class="promo-message">ğŸšš æ»¿ $1,000 å…é‹è²»ï¼Œç«‹å³ä¸‹å–®çœé‹è²»ï¼</div>
  </div>
</div>

<!-- NAV -->
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand fw-bold text-primary" href="index.html">JET YOUNG</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link active" href="order.html">Order</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- MAIN -->
<div class="container py-5">

  <h5 class="section-title mb-1">æœƒå“¡ä¸‹å–®å€</h5>
  <p  class="section-sub  mb-4">é¸è³¼å®Œï¼Œåªè¦é»æ“Šé€å‡ºæŒ‰éˆ•æˆ‘å€‘å°±æœƒæ”¶åˆ°æ‚¨çš„è¨‚å–®ï¼</p>

  <div class="row g-4 products-row mb-5">
    <!-- åªç¤ºç¯„ 3 å¼µï¼Œå…¶é¤˜è«‹ç…§æ­¤æ¨¡å¼è¤‡è£½è²¼ä¸Š -->
    <div class="col-4"><div class="card product-card text-center">
      <img src="images/product1.jpg" class="product-img" alt="Latte">
      <h6 class="fw-semibold mt-3 mb-1">Latte</h6>
      <div class="price text-primary fw-bold mb-2">$120</div>
      <div class="qty-group mb-2" data-key="latte">
        <button class="btn-qty minus">âˆ’</button>
        <input class="qty-input" id="latte" name="latte" type="number" value="0" readonly>
        <button class="btn-qty plus">ï¼‹</button>
      </div>
      <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
    </div></div>

    <div class="col-4"><div class="card product-card text-center">
      <img src="images/product2.jpg" class="product-img" alt="Americano">
      <h6 class="fw-semibold mt-3 mb-1">Americano</h6>
      <div class="price text-primary fw-bold mb-2">$90</div>
      <div class="qty-group mb-2" data-key="americano">
        <button class="btn-qty minus">âˆ’</button>
        <input class="qty-input" id="americano" name="americano" type="number" value="0" readonly>
        <button class="btn-qty plus">ï¼‹</button>
      </div>
      <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
    </div></div>

    <div class="col-4"><div class="card product-card text-center">
      <img src="images/product4.jpg" class="product-img" alt="Cappuccino">
      <h6 class="fw-semibold mt-3 mb-1">Cappuccino</h6>
      <div class="price text-primary fw-bold mb-2">$110</div>
      <div class="qty-group mb-2" data-key="cappuccino">
        <button class="btn-qty minus">âˆ’</button>
        <input class="qty-input" id="cappuccino" name="cappuccino" type="number" value="0" readonly>
        <button class="btn-qty plus">ï¼‹</button>
      </div>
      <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
    </div></div>
    <!-- â€¦å…¶é¤˜å¡ç‰‡ç…§æ­¤æ¨¡å¼è²¼ä¸Šâ€¦ -->
    <div class="col-4"><div class="card product-card text-center">
        <img src="images/product4.jpg" class="product-img" alt="Cappuccino">
        <h6 class="fw-semibold mt-3 mb-1">Cappuccino</h6>
        <div class="price text-primary fw-bold mb-2">$110</div>
        <div class="qty-group mb-2" data-key="cappuccino">
          <button class="btn-qty minus">âˆ’</button>
          <input class="qty-input" id="cappuccino" name="cappuccino" type="number" value="0" readonly>
          <button class="btn-qty plus">ï¼‹</button>
        </div>
        <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
      </div></div>

      <div class="col-4"><div class="card product-card text-center">
        <img src="images/product4.jpg" class="product-img" alt="Cappuccino">
        <h6 class="fw-semibold mt-3 mb-1">Cappuccino</h6>
        <div class="price text-primary fw-bold mb-2">$110</div>
        <div class="qty-group mb-2" data-key="cappuccino">
          <button class="btn-qty minus">âˆ’</button>
          <input class="qty-input" id="cappuccino" name="cappuccino" type="number" value="0" readonly>
          <button class="btn-qty plus">ï¼‹</button>
        </div>
        <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
      </div></div>

      <div class="col-4"><div class="card product-card text-center">
        <img src="images/product4.jpg" class="product-img" alt="Cappuccino">
        <h6 class="fw-semibold mt-3 mb-1">Cappuccino</h6>
        <div class="price text-primary fw-bold mb-2">$110</div>
        <div class="qty-group mb-2" data-key="cappuccino">
          <button class="btn-qty minus">âˆ’</button>
          <input class="qty-input" id="cappuccino" name="cappuccino" type="number" value="0" readonly>
          <button class="btn-qty plus">ï¼‹</button>
        </div>
        <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
      </div></div>
      <div class="col-4"><div class="card product-card text-center">
        <img src="images/product4.jpg" class="product-img" alt="Cappuccino">
        <h6 class="fw-semibold mt-3 mb-1">Cappuccino</h6>
        <div class="price text-primary fw-bold mb-2">$110</div>
        <div class="qty-group mb-2" data-key="cappuccino">
          <button class="btn-qty minus">âˆ’</button>
          <input class="qty-input" id="cappuccino" name="cappuccino" type="number" value="0" readonly>
          <button class="btn-qty plus">ï¼‹</button>
        </div>
        <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
      </div></div>
      <div class="col-4"><div class="card product-card text-center">
        <img src="images/product4.jpg" class="product-img" alt="Cappuccino">
        <h6 class="fw-semibold mt-3 mb-1">Cappuccino</h6>
        <div class="price text-primary fw-bold mb-2">$110</div>
        <div class="qty-group mb-2" data-key="cappuccino">
          <button class="btn-qty minus">âˆ’</button>
          <input class="qty-input" id="cappuccino" name="cappuccino" type="number" value="0" readonly>
          <button class="btn-qty plus">ï¼‹</button>
        </div>
        <small class="text-muted">é»æ“Šã€Œï¼‹ã€å³å¯æ–°å¢</small>
      </div></div>
  </div>

  <!-- ===== Desktop Summary (å³æ¬„) ===== -->
  <div class="row">
    <div class="col-lg-8"></div>
    <div class="col-lg-4">
      <div class="order-summary-sticky d-none d-lg-block">
        <div id="desktopSummary"></div>
      </div>
      <!-- ===== Mobile Bottom-sheet ===== -->
      <div class="mobile-sheet d-lg-none" id="mobileSheet">
        <div class="handle"></div>
        <div class="sheet-body px-2" id="mobileSummary"></div>
      </div>
    </div>
  </div>
</div>

  <!-- éš±è—é€å‡ºè¡¨å–® -->
  <form id="orderForm" action="https://formspree.io/f/xdkonwgk" method="POST" style="display:none;">
    <input id="latte"      name="latte"      type="number" value="0">
    <input id="americano"  name="americano"  type="number" value="0">
    <input id="souffle"    name="souffle"    type="number" value="0">
    <input id="cappuccino" name="cappuccino" type="number" value="0">
    <input id="espresso"   name="espresso"   type="number" value="0">
    <input id="mocha"      name="mocha"      type="number" value="0">
    <input id="caramac"    name="caramac"    type="number" value="0">
    <input id="coldbrew"   name="coldbrew"   type="number" value="0">
    <input id="hazel"      name="hazel"      type="number" value="0">
    <input id="vanilla"    name="vanilla"    type="number" value="0">
    <input type="hidden" id="order_summary" name="order_summary">
    <input type="hidden" name="_subject" value="ğŸ›’ æ–°è¨‚å–®ï¼">
    <input type="hidden" name="_template" value="table">
    <input type="hidden" name="mail_body" id="mailBody">
  </form>

  <footer class="bg-dark text-white text-center py-4 mt-5">Â© 2025 Jet Young</footer>

  <!-- Bootstrap & JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  // Loading overlay æ·¡å‡º
  window.addEventListener('load',()=>{
    const ov = document.getElementById('loading-overlay');
    if(ov){
      setTimeout(()=>{
        ov.classList.add('fade-out');
        setTimeout(()=>ov.style.display='none',300);
      },300);
    }
  });

  // ç”¢ç”Ÿè¨‚å–®è™Ÿ
  function genOrderId(){
    const d = new Date();
    const ymd = d.toISOString().slice(0,10).replace(/-/g,'');
    const rnd = Math.random().toString().slice(2,6);
    return `JY${ymd}${rnd}`;
  }

  // å•†å“è³‡æ–™
  const items = [
    {k:'latte',n:'Latte',p:120},
    {k:'americano',n:'Americano',p:90},
    {k:'souffle',n:'Matcha Souffle',p:150},
    {k:'cappuccino',n:'Cappuccino',p:110},
    {k:'espresso',n:'Espresso',p:85},
    {k:'mocha',n:'Mocha',p:130},
    {k:'caramac',n:'Caramel Macchiato',p:140},
    {k:'coldbrew',n:'Cold Brew',p:100},
    {k:'hazel',n:'Hazelnut Latte',p:135},
    {k:'vanilla',n:'Vanilla Latte',p:135},
  ];

  const f     = document.getElementById('orderForm');
  const desk  = document.getElementById('desktopSummary');
  const mob   = document.getElementById('mobileSummary');
  const sheet = document.getElementById('mobileSheet');

  function buildLines(){
    let total=0, lines=[];
    items.forEach(({k,n,p})=>{
      const el = f.elements[k];
      if(!el) return;
      const q = +el.value||0;
      if(q){ lines.push(`${n} Ã— ${q} = $${q*p}`); total+=q*p; }
    });
    return lines.length
      ? [...lines,'â€”'.repeat(40),`ç¸½è¨ˆ $${total}`].join('\n')
      : '';
  }

  function template(total,html){
    return `
      <div class="text-end">
        <button type="button" class="btn-close close-summary"></button>
      </div>
      <h5 class="text-primary fw-bold mb-3">è¨‚å–®æ˜ç´°</h5>
      ${html}
      <hr>
      <div class="d-flex justify-content-between fw-bold mb-3">
        <span>ç¸½è¨ˆ</span><span>$${total}</span>
      </div>
      <div class="contact-grid mb-3">
        <input class="form-control" name="customer_name" placeholder="æ”¶ä»¶äººå§“å*" required>
        <input class="form-control" name="customer_phone" placeholder="é›»è©±*" required>
        <input class="form-control full" name="customer_company" placeholder="å…¬å¸ (å¯ç•™ç©º)">
        <textarea class="form-control full" name="customer_addr" rows="2" placeholder="åœ°å€*" required></textarea>
      </div>
      <small class="text-muted d-block mb-3">ï¼Šè²¨åˆ°ä»˜æ¬¾ï¼Œå¸æ©Ÿæ”¶æ¬¾</small>
      <button class="btn btn-primary w-100" id="submitBtn" disabled>é€å‡ºè¨‚å–®</button>`;
  }

  function render(box){
    let total=0, html='';
    items.forEach(({k,n,p})=>{
      const el = f.elements[k], q = +el.value||0;
      if(q){
        html += `<div class="d-flex justify-content-between mb-2">
                   <span>${n} Ã— ${q}</span><span>$${q*p}</span>
                 </div>`;
        total += q*p;
      }
    });
    box.innerHTML = html
      ? template(total,html)
      : '<p class="text-center text-muted mb-0">(å°šæœªé¸è³¼)</p>';
  }

  function setQty(k,v){
    const el=f.elements[k];
    if(!el) return;
    el.value = v;
    document.querySelectorAll(`#${k}.qty-input`).forEach(i=>i.value=v);
    f.order_summary.value = buildLines();
    render(desk); render(mob);
    validate();
    if(window.innerWidth<992 && v>0) sheet.classList.add('open');
  }

  function validate(){
    const hasItem = items.some(({k})=> +f.elements[k]?.value );
    const okFields = [...f.elements].filter(el=>el.required);
    const ok = okFields.every(el=> el.value.trim() );
    document.querySelectorAll('#submitBtn').forEach(b=> b.disabled = !(hasItem && ok));
  }

  document.querySelectorAll('.qty-group').forEach(g=>{
    const key = g.dataset.key, inp = f.elements[key];
    g.querySelector('.plus').onclick  = ()=> setQty(key, +inp.value+1);
    g.querySelector('.minus').onclick = ()=> setQty(key, Math.max(0, +inp.value-1));
  });

  document.body.addEventListener('input', e=>{
    if(e.target.form===f) validate();
  });

  document.body.addEventListener('click', e=>{
    if(e.target.id !== 'submitBtn') return;
    e.preventDefault();

    // é‡å»ºæ‘˜è¦
    const æ‘˜è¦ = buildLines();
    f.order_summary.value = æ‘˜è¦;

    // ä¸€æ¬¡å¸¶å…¥æ•´å¼µè¡¨å–®
    const fd = new FormData(f);

    // æ±ºå®šå“ªå€‹å€åŸŸæ­£åœ¨é¡¯ç¤º
    const å€åŸŸ = sheet.classList.contains('open') ? mob : desk;
    const æ”¶ä»¶äºº = å€åŸŸ.querySelector('[name="customer_name"]').value.trim();
    const é›»è©±   = å€åŸŸ.querySelector('[name="customer_phone"]').value.trim();
    const å…¬å¸   = å€åŸŸ.querySelector('[name="customer_company"]').value.trim();
    const åœ°å€   = å€åŸŸ.querySelector('[name="customer_addr"]').value.trim();

    // æº–å‚™ä¸­æ–‡ç´”æ–‡å­—å…§æ–‡
    const å…§æ–‡ = 
`è¨‚å–®è™Ÿï¼š${genOrderId()}
æ”¶ä»¶äººï¼š${æ”¶ä»¶äºº}
é›»è©±ã€€ï¼š${é›»è©±}
å…¬å¸ã€€ï¼š${å…¬å¸}
åœ°å€ã€€ï¼š${åœ°å€}

â”€â”€â”€ è¨‚å–®æ˜ç´° â”€â”€â”€
${æ‘˜è¦}
`;

    // è¦†è“‹éš±è—æ¬„ä½
    fd.set('_subject',  `ğŸ›’ æ–°è¨‚å–®ï½œ${æ”¶ä»¶äºº}`);
    fd.set('mail_body', å…§æ–‡);

    fetch(f.action, {
      method:'POST',
      body:fd,
      headers:{ Accept:'application/json' }
    })
    .then(()=>{
      // é¡¯ç¤º Modal
      const orderId = genOrderId();
      const box = document.getElementById('confirmBody');
      box.innerHTML = `
<div class="text-start small">
  <div><strong>è¨‚å–®è™Ÿï¼š</strong>${orderId}</div>
  <div><strong>æ”¶ä»¶äººï¼š</strong>${æ”¶ä»¶äºº}</div>
  <div><strong>é›»è©±ã€€ï¼š</strong>${é›»è©±}</div>
  ${å…¬å¸? `<div><strong>å…¬å¸ã€€ï¼š</strong>${å…¬å¸}</div>` : ''}
  <div><strong>åœ°å€ã€€ï¼š</strong>${åœ°å€}</div>
  <hr class="my-2">
  <pre class="mb-0" style="white-space:pre-wrap;">${æ‘˜è¦}</pre>
  <hr class="my-2">
  <div class="text-danger fw-bold">â€» è«‹æˆªåœ–ç•™å­˜ï¼Œå¸æ©Ÿæ”¶æ¬¾æ™‚å‡ºç¤ºå³å¯</div>
</div>`;
      new bootstrap.Modal('#confirmModal').show();
      reset();
    })
    .catch(()=>alert('é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦'));
  });

  function reset(){
    items.forEach(({k})=> setQty(k,0));
    f.reset();
    render(desk); render(mob);
    sheet.classList.remove('open');
  }

  // Bottom-sheet è¡Œç‚º
  sheet.addEventListener('click', e=>{
    const isOpen = sheet.classList.contains('open');
    if(e.target.classList.contains('handle')){
      sheet.classList.toggle('open');
    } else if(e.target.closest('.close-summary')){
      sheet.classList.remove('open');
    } else if(!isOpen){
      sheet.classList.add('open');
    }
  });
  document.body.addEventListener('click', e=>{
    if(e.target.classList.contains('close-summary'))
      sheet.classList.remove('open');
  });

  // Promo-bar è·‘é¦¬ç‡ˆ
  document.addEventListener('DOMContentLoaded', ()=>{
    const msgs = document.querySelectorAll('.promo-bar .promo-message');
    if(!msgs.length) return;
    let i=0; msgs[0].classList.add('active');
    setInterval(()=>{
      msgs[i].classList.remove('active');
      i = (i+1) % msgs.length;
      msgs[i].classList.add('active');
    },3500);
  });

  // åˆå§‹æ¸²æŸ“
  render(desk);
  render(mob);
  validate();
  </script>

</body>
</html>
